webpackJsonp([5],{144:function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){this.mixin(i.prototype),this.mixin(c),this.eventPromises=[],this.onPageProductEnabled=!0,this.widgetReference=null,this.mountConfig=this.opts,this.on("unmount",this._onUnmount)}var s=n(121),a=n(14);n(331),n(339),n(625);var r=n(333),f=n(335),c=n(628);i.prototype._onUnmount=function(){this.eventPromises.forEach(function(e){"function"==typeof e&&e()})},i.prototype._onUpdatedSummary=function(e){"object"===o(e)&&(this.onPageProductEnabled=Boolean("object"===o(e.rating)&&"object"===o(e.rating.product)&&e.rating.product.count>0),this.update())},i.prototype.onMainMount=function(e){var t=r.init(this);this.widgetReference=e.widgetReference,this.update(),t=r.setReference(e.widgetReference,t),t.listen(this),this.eventsInstance=f.getInstance(e.widgetReference),this.eventPromises=[this.eventsInstance.on("updated-summary",this._onUpdatedSummary,!0)]},i.prototype.onMainReady=function(){window.setTimeout(this._afterRender.bind(this),500)},i.prototype._afterRender=function(){this._insertSmallLogo(),this.pageElement=a("html, body"),this.onPageWidgetElement=a("feefowidget-global",this.root)},i.prototype._insertSmallLogo=function(){var e=a(".feefowidget-on-page-small-logo-container",this.root).html();a(".feefo-review-badge-wrapper-product").html(e),a("feefowidget-logo-small",".feefo-review-badge-wrapper-product").on("click",this._onSmallLogoClick)},i.prototype._onSmallLogoClick=function(e){var t,n=this.integrations.convertMerchantName(this.config.merchantName),o=0;this.integrations.isMerchantHasExtraOffset(n)&&(o=this.integrations.merchantsMethods[n].getExtraOffset()),t=this.onPageWidgetElement.offset().top-o,e&&e.stopPropagation(),this.pageElement.animate({scrollTop:t},1e3),"function"==typeof window.FeefoOpenReviewsAccordion&&window.FeefoOpenReviewsAccordion()},s.tag("feefowidget-container-onpage-product",n(629),n(630),i)},625:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(){this.mixin(i.prototype),this.configInstance=r.default.init(this),this.summary={data:{},loading:!0},this.widgetReference=null,this.on("mount",this._onMount),this.on("unmount",this._onUnmount)}var s=n(121),a=o(n(626));n(627),n(338);var r=o(n(333)),f=o(n(335));Object.assign(i.prototype,{_onMount:function(){var e=this;this.configInstance=r.default.setReference(this.opts.widgetReference,this.configInstance),this.configInstance.listen(this),this.eventsInstance=f.default.getInstance(this.opts.widgetReference),this.eventPromises=[this.eventsInstance.on("update-summary",function(){return e._onUpdateSummary()}),this.eventsInstance.on("updated-summary",function(t){return e._onUpdatedSummary(t)},!0)],this.widgetReference=this.opts.widgetReference,this.update()},_onUnmount:function(){this.eventPromises.forEach(function(e){"function"==typeof e&&e()})},_onUpdateSummary:function(){this.summary.loading=!0,this.update()},_onUpdatedSummary:function(e){this.summary.data=e._transformed,this.summary.loading=!1,this.update()}}),(0,s.tag)("feefowidget-logo-small",a.default,null,i)},626:function(e,t,n){e.exports='<feefowidget-rating-stars\n  colour="yellow"\n  rating="{summary.data.ratingsOverall}"\n  widget-reference="{opts.widgetReference}"></feefowidget-rating-stars>\n<span class="feefowidget-reviews-total">({summary.data.reviewsTotal})</span>\n<img\n  if="{config.displayImportedReviews !== true}"\n  class="feefowidget-logo"\n  src="'+n(337)+'" />\n'},627:function(e,t){},628:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={integrations:{merchantsList:["trunki","thePerfumeShop"],merchantsMethods:{trunki:{getExtraOffset:function(){var e,t,n=document.getElementById("site_header_menu");return n?(e=n.getBoundingClientRect().height,n.classList.add("fixed_mega_menu"),t=n.getBoundingClientRect().height,n.classList.remove("fixed_mega_menu"),e+t):0}},thePerfumeShop:{getExtraOffset:function(){var e=document.querySelectorAll("header .account-bar")[0];return e?e.getBoundingClientRect().height:0}}},isMerchantHasExtraOffset:function(e){return this.merchantsList.indexOf(e)>-1},convertMerchantName:function(e){var t=e.split(" ");return t[0]=t[0].toLowerCase(),t.join("")}}};t.default=o,e.exports=t.default},629:function(e,t){e.exports='<feefowidget-container-main\n  if="{onPageProductEnabled}"\n  on-mount="{onMainMount}"\n  on-ready="{onMainReady}"\n  mount-config="{mountConfig}">\n  <div if="{widgetReady}">\n    <div class="feefowidget-on-page-small-logo-container">\n      <feefowidget-logo-small widget-reference="{widgetReference}"></feefowidget-logo-small>\n    </div>\n    <feefowidget-global\n      integration-type="onpage-product"\n      widget-reference="{widgetReference}"></feefowidget-global>\n  </div>\n</feefowidget-container-main>\n'},630:function(e,t){}});